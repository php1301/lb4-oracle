{
  "password": "test1234",
  "username": "php1301",
  "email": "final@1234.com",
  "soDT": "string",
  "hoTen": "string",
  "maLoaiNguoiDung": 1
}

{
  "email": "final@1234.com",
  "password": "test1234"
}

{
  "email": "test12345@gmail.com",
  "password": "test12345"
}

    "prestart": "npm run rebuild",
org is mail

https://stackoverflow.com/questions/58744732/how-to-fix-org-or-space-not-found-error-while-creating-toolchain-in-ibm-cloud
nEY04HKBj8S0iWbNiAqgfQtTLiMjbm002Ro-Cp1PM9Bi

{
  "ngayDat": "string",
  "giaVe": 20000,
  "maLichChieu": 45,
  "taiKhoan": 2,
  "ghe": [
    {
      "maGhe": 4
    },
    {
      "maGhe": 5
    },
    {
      "maGhe": 6
    }
  ]
}

{
  "offset": 0,
  "limit": 100,
  "skip": 0,
  "fields": {
    "maVe": true,
    "ngayDat": true,
    "giaVe": true,
    "maLichChieu": true,
    "taiKhoan": true
  }
}

TRIGGER
1. Kiem tra ghe trung
2. Set kichHoat tren ghe moi khi DatVe thanh cong
3. Kiem tra xem HeThongRap->CumRap->Rap hay khong
4. Kiem tra xem ngayChieu co sau ngayKhoiChieu cua Phim luc tao LichChieu hay khong
Stored Procedure
1. Query toan bo lich chieu cua he thong rap -> cumrap -> rap
2. Goi Y HeThongRap -> CumRap -> Rap cho combobox
Function
1. Tinh tien ghe (nghien cuu them goi stored procedure o nodejs), tien ve se = tien cua cac ghe(base on loaiGhe) + loai

ngrok authtoken 1sGJpdKN8DsBvXTmMVuqNbtYC5z_3Kw3sWfAvdiDYnAKxW698
ngrok http -host-header="[::1]:3000" 3000
87de5c9b89abd79b203bc51be577b68d5dba862f

CREATE USER 'admin'@'localhost' IDENTIFIED BY 'java123';
GRANT ALL PRIVILEGES ON * . * TO 'admin'@'localhost';

ALTER TABLE `Ve` ENGINE=InnoDB;
ALTER TABLE `Ghe` ENGINE=InnoDB;
ALTER TABLE `Users` ENGINE=InnoDB;
ALTER TABLE `UserCredentials` ENGINE=InnoDB;
ALTER TABLE `TheLoai` ENGINE=InnoDB;
ALTER TABLE `Rap` ENGINE=InnoDB;
ALTER TABLE `PhimTheLoai` ENGINE=InnoDB;
ALTER TABLE `Phim` ENGINE=InnoDB;
ALTER TABLE `LoaiNguoiDung` ENGINE=InnoDB;
ALTER TABLE `LoaiGhe` ENGINE=InnoDB;
ALTER TABLE `LichChieu` ENGINE=InnoDB;
ALTER TABLE `HeThongRap` ENGINE=InnoDB;
ALTER TABLE `GheDaDat` ENGINE=InnoDB;
ALTER TABLE `DatVe` ENGINE=InnoDB;
ALTER TABLE `CumRap` ENGINE=InnoDB;
set time_zone = '+07:00';
-- USERS
ALTER TABLE Users ADD CONSTRAINT FK_nguoidung_loainguoidung FOREIGN KEY(maLoaiNguoiDung) REFERENCES LoaiNguoiDung(maLoaiNguoiDung) ON DELETE CASCADE;

-- USERCREDENTIALS
ALTER TABLE UserCredentials ADD CONSTRAINT FK_usercredentials_user FOREIGN KEY(taiKhoan) REFERENCES Users(taiKhoan) ON DELETE CASCADE;

-- LOAINGUOIDUNG

-- VE
ALTER TABLE Ve ADD CONSTRAINT FK_ve_nguoidung FOREIGN KEY(taiKhoan) REFERENCES Users(taiKhoan) ON DELETE CASCADE;
ALTER TABLE Ve ADD CONSTRAINT FK_ve_lichchieu FOREIGN KEY (maLichChieu) REFERENCES LichChieu(maLichChieu) ON DELETE CASCADE;
ALTER TABLE Ve CHANGE ngayDat ngayDat DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP;
-- GHE
ALTER TABLE Ghe ADD CONSTRAINT FK_ghe_maloaighe FOREIGN KEY(maLoaiGhe) REFERENCES LoaiGhe(maLoaiGhe) ON DELETE CASCADE;
ALTER TABLE Ghe ADD CONSTRAINT FK_ghe_maRap FOREIGN KEY(maRap) references Rap(maRap) ON DELETE CASCADE;
-- RAP
ALTER TABLE Rap ADD CONSTRAINT FK_rap_cumrap FOREIGN KEY(maCumRap) REFERENCES CumRap(maCumRap) ON DELETE CASCADE;

-- CUMRAP
ALTER TABLE CumRap ADD CONSTRAINT FK_cumrap_hethongrap FOREIGN KEY(maHeThongRap) REFERENCES HeThongRap(maHeThongRap) ON DELETE CASCADE;
-- HETHONGRAP
-- PHIM
-- THELOAI
-- PHIMTHELOAI
ALTER TABLE PhimTheLoai ADD CONSTRAINT FK_phim_theloai_phim FOREIGN KEY(maPhim) REFERENCES Phim(maPhim) ON DELETE CASCADE;
ALTER TABLE PhimTheLoai ADD CONSTRAINT FK_phim_theloai_theloai FOREIGN KEY(maTheLoai) REFERENCES TheLoai(maTheLoai) ON DELETE CASCADE;

-- LICHCHIEU
ALTER TABLE LichChieu ADD CONSTRAINT FK_lichchieu_phim FOREIGN KEY(maPhim) REFERENCES Phim(maPhim) ON DELETE CASCADE;
ALTER TABLE LichChieu ADD CONSTRAINT FK_lichchieu_rap FOREIGN KEY(maRap) REFERENCES Rap(maRap) ON DELETE CASCADE;
ALTER TABLE LichChieu ADD CONSTRAINT FK_lichchieu_cumrap FOREIGN KEY(maCumRap) REFERENCES CumRap(maCumRap) ON DELETE CASCADE;
ALTER TABLE LichChieu ADD CONSTRAINT FK_lichchieu_hethongrap FOREIGN KEY(maHeThongRap) REFERENCES HeThongRap(maHeThongRap) ON DELETE CASCADE;
ALTER TABLE `LichChieu` CHANGE `gioChieu` `gioChieu` TIME NOT NULL;

-- DATVE
ALTER TABLE DatVe ADD CONSTRAINT FK_datve_ve FOREIGN KEY(maVe)REFERENCES Ve(maVe) ON DELETE CASCADE;
ALTER TABLE DatVe ADD CONSTRAINT FK_datve_ghe FOREIGN KEY(maGhe)REFERENCES Ghe(maGhe) ON DELETE CASCADE;

-- GHEDADAT
ALTER TABLE GheDaDat ADD CONSTRAINT FK_ghedadat_lichchieu FOREIGN KEY(maLichChieu)REFERENCES LichChieu(maLichChieu) ON DELETE CASCADE;
ALTER TABLE GheDaDat ADD CONSTRAINT FK_ghedadat_ghe FOREIGN KEY(maGhe)REFERENCES Ghe(maGhe) ON DELETE CASCADE;

SELECT  CONCAT('ALTER TABLE `', table_name, '` ENGINE=InnoDB;') AS sql_statements
FROM    information_schema.tables AS tb
WHERE   table_schema = "doanjava_v1"
AND     `ENGINE` = 'MyISAM'
AND     `TABLE_TYPE` = 'BASE TABLE'
ORDER BY table_name DESC;

ALTER TABLE `Ve` ENGINE=InnoDB;
ALTER TABLE `Ghe` ENGINE=InnoDB;
ALTER TABLE `Users` ENGINE=InnoDB;
ALTER TABLE `UserCredentials` ENGINE=InnoDB;
ALTER TABLE `TheLoai` ENGINE=InnoDB;
ALTER TABLE `Rap` ENGINE=InnoDB;
ALTER TABLE `PhimTheLoai` ENGINE=InnoDB;
ALTER TABLE `Phim` ENGINE=InnoDB;
ALTER TABLE `LoaiNguoiDung` ENGINE=InnoDB;
ALTER TABLE `LoaiGhe` ENGINE=InnoDB;
ALTER TABLE `LichChieu` ENGINE=InnoDB;
ALTER TABLE `HeThongRap` ENGINE=InnoDB;
ALTER TABLE `GheDaDat` ENGINE=InnoDB;
ALTER TABLE `DatVe` ENGINE=InnoDB;
ALTER TABLE `CumRap` ENGINE=InnoDB;


DROP PROCEDURE IF EXISTS sp1;
DELIMITER //
CREATE PROCEDURE sp1()
BEGIN
SELECT MONTH(v.ngayDat) as thang, SUM(v.giaVe) as doanhThu
FROM Ve v
GROUP BY thang;
END //
DELIMITER ;


DROP PROCEDURE IF EXISTS sp2;
DELIMITER //
CREATE PROCEDURE sp2(IN thang INT, IN nam INT, IN maPhimArg INT)
BEGIN
SELECT SUM(v.giaVe) as doanhThu, p.maPhim as maPhim, p.tenPhim as tenPhim
FROM Ve v, Phim p, LichChieu lc
where v.maLichChieu = lc.maLichChieu
and lc.maPhim = p.maPhim
and p.maPhim = maPhimArg
and MONTH(v.ngayDat) = thang
and YEAR(v.ngayDat)= nam
GROUP BY v.maVe;
END //
DELIMITER ;
